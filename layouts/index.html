{{ define "main" }}
<main style="max-width:1000px;margin:0 auto;padding:1rem">
  <h1>HOME (test images)</h1>

  {{ $pages := where .Site.RegularPages "Type" "in" (slice "posts" "post" "writeups") }}
  {{ $p := .Paginate $pages }}

  <ul style="list-style:none;padding:0;margin:0;display:grid;gap:1rem">
    {{ range $p.Pages }}
      {{ $url := printf "%simage.jpg" .RelPermalink }}
      <li style="display:grid;grid-template-columns:1fr 220px;gap:1rem;align-items:start;border-bottom:1px solid #ccc;padding-bottom:1rem">
        <div>
          <h2 style="margin:.2rem 0"><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
          <div style="opacity:.8">URL image calculée : <code>{{ $url }}</code></div>
        </div>

        <a href="{{ .RelPermalink }}" style="display:block;border:1px solid #ddd;border-radius:8px;overflow:hidden">
          <img src="{{ $url }}" alt="{{ .Title }}" style="display:block;width:100%;height:auto">
        </a>
      </li>
    {{ end }}
  </ul>

  {{ if gt $p.TotalPages 1 }}
    <nav style="margin-top:1rem;text-align:center">
      {{ if $p.HasPrev }}<a href="{{ $p.Prev.URL }}">← Plus récents</a>{{ end }}
      <span> Page {{ $p.PageNumber }} / {{ $p.TotalPages }} </span>
      {{ if $p.HasNext }}<a href="{{ $p.Next.URL }}">Plus anciens →</a>{{ end }}
    </nav>
  {{ end }}
</main>
{{ end }}


