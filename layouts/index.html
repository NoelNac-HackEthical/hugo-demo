{{ define "main" }}
<main class="home-min">
  <ul class="post-list">
    {{ range .Pages }}
      <li class="post-item">
        <div style="display: flex; align-items: flex-start; justify-content: space-between;">
          <div style="flex: 1;">
            <h2 class="post-title">
              <a href="{{ .RelPermalink }}">{{ .Title }}</a>
            </h2>
            <div class="post-meta">
              {{ .Date.Format "02 Jan 2006" }}
            </div>
            <div class="post-summary">
              {{ .Summary }}
            </div>
            {{ with .Params.tags }}
              <div class="post-tags">
                {{ range . }}
                  <a class="tag" href="{{ "tags/" | relLangURL }}{{ . | urlize }}">{{ . }}</a>
                {{ end }}
              </div>
            {{ end }}
          </div>
          {{ with .Resources.GetMatch "image.*" }}
            <img src="{{ .RelPermalink }}" alt="Illustration du writeup {{ $.Title }}"
                 style="max-width:150px; margin-left:1rem;">
          {{ end }}
        </div>
      </li>
    {{ end }}
  </ul>
</main>

<style>
  .home-min { max-width: 860px; margin: 0 auto; padding: 1rem; }
  .post-list { list-style: none; margin: 0; padding: 0; display: grid; gap: 1.25rem; }
  .post-item { border-bottom: 1px solid var(--border, rgba(127,127,127,.25)); padding-bottom: 1rem; }
  .post-title { font-size: 1.2rem; margin: 0 0 .25rem; }
  .post-meta { font-size: .9rem; opacity: .8; margin-bottom: .4rem; }
  .post-summary { margin: 0 0 .4rem; }
  .post-tags { display: flex; flex-wrap: wrap; gap: .4rem; }
  .post-tags .tag {
    font-size: .85rem;
    text-decoration: none;
    font-weight: bold;
    color: #1E90FF;
    background-color: var(--tag-bg);
    padding: .1rem .4rem;
    border-radius: 999px;
    transition: color 0.2s ease, background-color 0.2s ease;
  }
  html:not(.dark) .post-tags .tag:hover,
  body:not(.dark) .post-tags .tag:hover {
    color: #003366;
    background-color: var(--tag-bg-hover-light);
  }
  html.dark .post-tags .tag:hover,
  body.dark .post-tags .tag:hover {
    color: #ffffff;
    background-color: var(--tag-bg-hover-dark);
  }
  :root {
    --border: rgba(127,127,127,.25);
    --tag-bg: rgba(127,127,127,.15);
    --tag-bg-hover-light: rgba(127,127,127,.30);
  }
  html.dark, body.dark {
    --border: rgba(255,255,255,.15);
    --tag-bg: rgba(255,255,255,.15);
    --tag-bg-hover-dark: rgba(255,255,255,.25);
  }
</style>
{{ end }}
